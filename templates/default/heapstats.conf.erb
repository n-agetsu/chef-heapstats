# heapstats_agent 1.1.2
# heapstats_agent 1.1.2 configuration file.
# see http://icedtea.classpath.org/wiki/HeapStats/heapstats.conf
attach=true

# Output file setting
file=<%= node[:heapstats][:file] %>
heaplogfile=<%= node[:heapstats][:heaplogfile] %>
archivefile=<%= node[:heapstats][:archivefile] %>
loglevel=INFO
reduce_snapshot=true

# Trigger snapshot setting
trigger_on_fullgc=true
trigger_on_dump=true

# Trigger logging setting
trigger_on_logerror=true
trigger_on_logsignal=true
trigger_on_loglock=true

# Rank setting
rank_level=5
rank_order=delta

# Alert setting
alert_percentage=<%= node[:heapstats][:alert_percentage] %>

# Alert threshold for java heap usage.
# "0" means disabled.
javaheap_alert_percentage=<%= node[:heapstats][:javaheap_alert_percentage] %>

# Alert threshold for metaspace usage (in MB).
# "0" means disabled.
metaspace_alert_threshold=0

# Timer setting
snapshot_interval=0
log_interval=300

first_collect=true
logsignal_normal=
logsignal_all=SIGUSR2
signal_reload=SIGHUP

# Snmp setting
snmp_send=<%= node[:heapstats][:snmp_send] %>
snmp_target=<%= node[:heapstats][:snmp_target] %>
snmp_comname=<%= node[:heapstats][:snmp_comname] %>

logdir=./tmp
archive_command=/usr/bin/zip %archivefile% -jr %logdir%

kill_on_error=<%= node[:heapstats][:kill_on_error] %>
